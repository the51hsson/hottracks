{"version":3,"sources":["ui_product_mok.js"],"names":["setProdDetailAnchor","$","length","_tabLinks","on","optionSelectBox","this","closest","hasClass","removeClass","find","text","addClass","event","targetId","offsetTop","preventDefault","currentTarget","getAttribute","offset","top","stop","animate","scrollTop","tabObserver","MutationObserver","mutations","forEach","mutation","target","currentClassList","activeIndex","attributeName","classList","value","dataset","prevClass","parent","eq","document","querySelectorAll","observe","attributes","prodHeaderObserver","reviewTabAnchor","reviewOffsetTop","Math","floor","setProdTitleMoreBtn","overflowEl","overflowElCnt","each","index","remove","element","CustomSwiper","observer","observeParents","slidesPerView","loop","navigation","nextEl","siblings","prevEl","pagination","el","type","renderFraction","currentClass","totalClass","formatFractionCurrent","number","KyoboBookPub","mok","setPrependZero","formatFractionTotal","speed","autoHeight","slideChangeTransitionStart","swiper","focus","window","off"],"mappings":"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","file":"ui_product_mok.min.js","sourcesContent":["/*\n * name : ui_product_mok.js\n * desc : 상품 공통 자바스크립트\n * writer : glim\n * create : 2021/11/26\n * update :\n * -\n */\n\n$(function(){\n\tsetProdDetailAnchor();\n\treviewTabAnchor();\n\n\tsetProdTitleMoreBtn();\n\n\t// 리뷰 내 리뷰 썸네일 swiper\n\t$(\".review_swiper .swiper-container\").each(function (index, element) {\n\t\tvar reviewSwiper = new CustomSwiper(this, {\n\t\t\tobserver: true,\n\t\t\tobserveParents: true,\n\t\t\tslidesPerView: 'auto',\n\t\t\tloop: true,\n\t\t\tnavigation: {\n\t\t\t\tnextEl: $(this).siblings('.swiper-button-next'),\n\t\t\t\tprevEl: $(this).siblings('.swiper-button-prev'),\n\t\t\t},\n\t\t\tpagination: {\n\t\t\t\tel: '.review_swiper .swiper-pagination',\n\t\t\t\ttype: 'fraction',\n\t\t\t\trenderFraction: function(currentClass, totalClass){\n\t\t\t\t\treturn '<span class=\"' + currentClass + '\"></span>' + '<span class=\"' + totalClass + '\"></span>';\n\t\t\t\t},\n\t\t\t\tformatFractionCurrent: function (number) {\n\t\t\t\t\treturn KyoboBookPub.mok.setPrependZero(number, 2);\n\t\t\t\t},\n\t\t\t\tformatFractionTotal: function (number) {\n\t\t\t\t\treturn KyoboBookPub.mok.setPrependZero(number, 2);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t});\n\n\t// 추천 팝업 스와이퍼\n\tvar prodRecommendSwiper;\n\n\tprodRecommendSwiper = new CustomSwiper('.prod_recommend_list_wrap .swiper-container', {\n\t\tslidesPerView: '1',\n\t\tloop: true,\n\t\tspeed: 500,\n\t\tautoHeight: true,\n\t\ton: {\n\t\t\tslideChangeTransitionStart: function(swiper) {\n\t\t\t\t$('#popRecommendList .dialog_contents .prod_recommend_list').scrollTop(0);\n\t\t\t}\n\t\t}\n\t});\n\n\t// 추천 팝업 전체보기, 전체닫기 버튼\n\t$('.prod_recommend .dialog_wrap .btn_show_all_list').on('click', function(event) {\n\t\t$('.prod_recommend .dialog_wrap .dialog_contents').addClass('show_all_list').find('.btn_close_all_list').focus();\n\t});\n\t$('.prod_recommend .dialog_wrap .btn_close_all_list').on('click', function(event) {\n\t\t$('.prod_recommend .dialog_wrap .dialog_contents').removeClass('show_all_list');\n\t\t$('.prod_recommend .dialog_wrap .btn_show_all_list').focus();\n\t});\n});\n\n// 상품상세 앵커탭 기능\nfunction setProdDetailAnchor(){\n\tif($('.tab_wrap.prod_detail_body').length > 0) {\n\t\tvar _tabLinks;\n\t\t_tabLinks = $('.tab_wrap.prod_detail_body > .tab_list_wrap .tabs .tab_item .tab_link');\n\n\t\t// 옵션영역 펼치기\n\t\t$('.btn_option_more', '.prod_option_info_wrap').on('click', function () {\n\t\t\tvar optionSelectBox = $(this).closest('.prod_option_info_wrap');\n\n\t\t\tif (optionSelectBox.hasClass('active')) {\n\t\t\t\toptionSelectBox.removeClass('active');\n\t\t\t\t$(this).find('.hidden').text('옵션 선택 영역 접기');\n\t\t\t} else {\n\t\t\t\toptionSelectBox.addClass('active');\n\t\t\t\t$(this).find('.hidden').text('옵션 선택 영역 펼치기');\n\t\t\t}\n\t\t});\n\n\t\t// 상품 상세 탭 링크 클릭시 해당 위치로 이동\n\t\t_tabLinks.on('click.product', function (event) {\n\t\t\tvar targetId, offsetTop;\n\t\t\tevent.preventDefault();\n\n\t\t\ttargetId = event.currentTarget.getAttribute('href');\n\t\t\toffsetTop = $(targetId).offset().top - 46;\n\t\t\t$('html, body').stop().animate({scrollTop: offsetTop}, 300);\n\t\t});\n\n\t\t// 상세 컨텐츠 블럭별 class 값 변경 Observer\n\t\tvar tabObserver = new MutationObserver(function (mutations) {\n\t\t\tmutations.forEach(function (mutation) {\n\t\t\t\tif (mutation.attributeName === 'class') {\n\t\t\t\t\tvar target, currentClassList;\n\t\t\t\t\ttarget = mutation.target;\n\t\t\t\t\tcurrentClassList = target.classList.value;\n\t\t\t\t\tif (target.dataset.prevClass !== currentClassList) {\n\t\t\t\t\t\ttarget.dataset.prevClass = currentClassList;\n\n\t\t\t\t\t\tsetTabBtnActive();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 스크롤에 따라 탭 active 상태 변경\n\t\tfunction setTabBtnActive() {\n\t\t\tvar activeIndex;\n\t\t\tactiveIndex = $('.prod_detail_contents .tab_content.sps-blw').length - 1;\n\n\t\t\t_tabLinks.parent().removeClass('active');\n\t\t\tif (activeIndex !== -1) {\n\t\t\t\t_tabLinks.eq(activeIndex).parent().addClass('active');\n\t\t\t\t$('.wrapper').addClass('sticky_tabs');\n\t\t\t} else {\n\t\t\t\t$('.wrapper').removeClass('sticky_tabs');\n\t\t\t}\n\t\t}\n\n\t\tdocument.querySelectorAll('.prod_detail_contents .tab_content.sps').forEach(function (target) {\n\t\t\ttarget.dataset.prevClass = target.classList;\n\t\t\ttabObserver.observe(target, {attributes: true});\n\t\t});\n\n\t\t// 상세 해더영역 이미지 하단 class 값 변경 Observer\n\t\tvar prodHeaderObserver = new MutationObserver(function (mutations) {\n\t\t\tmutations.forEach(function (mutation) {\n\t\t\t\tif (mutation.attributeName === 'class') {\n\t\t\t\t\tvar target, currentClassList;\n\t\t\t\t\ttarget = mutation.target;\n\t\t\t\t\tcurrentClassList = target.classList.value;\n\t\t\t\t\tif (target.dataset.prevClass !== currentClassList) {\n\t\t\t\t\t\ttarget.dataset.prevClass = currentClassList;\n\n\t\t\t\t\t\tsetHeaderType();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tfunction setHeaderType() {\n\t\t\tif ($('.prod_detail_header .prod_detail_view_wrap').hasClass('sps-blw')) {\n\t\t\t\t$('.header_wrapper').removeClass('type_white');\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$('.header_wrapper').addClass('type_white');\n\t\t\t}\n\t\t}\n\n\t\tdocument.querySelectorAll('.prod_detail_header .prod_detail_view_wrap.sps').forEach(function (target) {\n\t\t\ttarget.dataset.prevClass = target.classList;\n\t\t\tprodHeaderObserver.observe(target, {attributes: true});\n\t\t});\n\t}\n}\n\n// 상품 상단 - 리뷰 영역 선택 시 하단 리뷰로 이동\nfunction reviewTabAnchor() {\n\tif ($('.prod_review_box .btn_go_review').length > 0) {\n\t\t$('.prod_review_box .btn_go_review').on('click', function () {\n\t\t\tvar reviewOffsetTop;\n\t\t\treviewOffsetTop = Math.floor($('#scrollSpyProdReview').offset().top) - 46;\n\n\t\t\t$('html, body').stop().animate({scrollTop: reviewOffsetTop}, 300);\n\t\t});\n\t}\n}\n\n// 상품 상세 상단 타이틀 더보기 버튼 - 한 개만 노출 되도록\nfunction setProdTitleMoreBtn() {\n\tvar overflowEl, overflowElCnt;\n\toverflowEl = $('.prod_detail_title_wrap .auto_overflow_wrap.overflow');\n\toverflowElCnt = overflowEl.length;\n\n\tif (overflowElCnt > 1) {\n\t\toverflowEl.each(function (index) {\n\t\t\tif (index < overflowElCnt - 1) {\n\t\t\t\t$(this).find('> .auto_overflow_footer .btn_more_detail').remove();\n\t\t\t}\n\t\t});\n\t}\n}\n$(window).off('resize.uiProdTitle orientationChange.uiProdTitle', setProdTitleMoreBtn).on('resize.uiProdTitle orientationChange.uiProdTitle', setProdTitleMoreBtn);"]}